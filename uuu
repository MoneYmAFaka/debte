-- Load UI Library from updated source
local Arrayfield
local success, result = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/MoneYmAFaka/debte/refs/heads/main/uuu"))()
end)

if not success then
    warn("Failed to load Arrayfield UI library: " .. tostring(result))
    return
end

Arrayfield = result

-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

if not LocalPlayer then
    warn("Player not found. Script aborted.")
    return
end

-- Toggle & Case Settings
local autoOpenEnabled = false
local selectedCase = "FreeCase"

-- Function to repeatedly open case
local function autoOpenLoop()
    task.spawn(function()
        while autoOpenEnabled do
            local args = { [1] = selectedCase }
            pcall(function()
                ReplicatedStorage:WaitForChild("OpenCrate", 9e9):InvokeServer(unpack(args))
            end)
            task.wait(6)
        end
    end)
end

-- Create UI
local Window = Arrayfield:CreateWindow({
    Name = "Case Opener Hub",
    LoadingTitle = "Initializing",
    LoadingSubtitle = "by xAI",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "CaseOpenerConfig",
        FileName = "UserSettings"
    }
})

-- Main Tab
local MainTab = Window:CreateTab("Main", 4483362458)

-- Case Dropdown
MainTab:CreateDropdown({
    Name = "Select Case",
    Options = {
        "FreeCase",
        "Snakebite",
        "Horizon",
        "WeaponCase1",
        "WeaponCase2",
        "eSports2013"
    },
    CurrentOption = "FreeCase",
    Flag = "CaseSelector",
    Callback = function(option)
        selectedCase = option
    end,
})

-- Auto Open Toggle
MainTab:CreateToggle({
    Name = "Auto Open Case",
    Info = "Automatically opens selected case every 6 seconds.",
    CurrentValue = false,
    Flag = "AutoOpenCase",
    Callback = function(Value)
        autoOpenEnabled = Value
        if Value then
            autoOpenLoop()
        end
    end,
})

-- UI Close Logic
local closeKey = Enum.KeyCode.E
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == closeKey then
        Window:Destroy()
    end
end)

MainTab:CreateInput({
    Name = "Close UI Key",
    Info = "Key to close UI (default: E)",
    PlaceholderText = "Enter Key",
    Callback = function(Text)
        local key = Enum.KeyCode[Text:upper()]
        if key then
            closeKey = key
        end
    end,
})

MainTab:CreateLabel("Script Loaded! Select your case and toggle auto open.")
