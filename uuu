-- Star & Enemy Farm (WindUI) - by Fry
local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

local Window = WindUI:CreateWindow({
    Title = "Star & Enemy Farm",
    Author = "by Fry",
    Icon = "solar:star-bold",
    Theme = "MonokaiPro",
    NewElements = true,
    Transparent = true,
    Acrylic = true,
})
Window:Open()

local Main = Window:Tab({Title = "Main", Icon = "solar:cart-large-bold"})
Main:Select()

-- Remotes (your exact paths)
local Knit = game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_knit@1.5.1"):WaitForChild("knit")
local ClickRemote = Knit:WaitForChild("Services"):WaitForChild("ClickService"):WaitForChild("RF"):WaitForChild("Click")
local OpenStarRemote = Knit:WaitForChild("Services"):WaitForChild("StarService"):WaitForChild("RF"):WaitForChild("OpenStar")

local StarsFolder = game:GetService("ReplicatedStorage"):WaitForChild("Assets"):WaitForChild("Models"):WaitForChild("Stars")
local EnemiesFolder = game:GetService("ReplicatedStorage"):WaitForChild("Assets"):WaitForChild("Models"):WaitForChild("Enemies")

local selectedStar = nil
local selectedEnemy = nil
local autoClicking = false
local autoHatching = false
local autoTeleporting = false
local hatchAmount = 1

local function GetStars()
    local list = {}
    for _, v in ipairs(StarsFolder:GetChildren()) do
        if v:IsA("Model") then table.insert(list, v.Name) end
    end
    table.sort(list)
    return list
end

local function GetEnemies()
    local list = {}
    for _, v in ipairs(EnemiesFolder:GetChildren()) do
        if v:IsA("Model") then table.insert(list, v.Name) end
    end
    table.sort(list)
    return list
end

local function TeleportToEnemy()
    if not selectedEnemy then return end
    local char = game.Players.LocalPlayer.Character
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end

    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("Model") and obj.Name == selectedEnemy and obj:FindFirstChild("Humanoid") and obj:FindFirstChild("HumanoidRootPart") then
            root.CFrame = obj:GetPivot() * CFrame.new(0, 12, 12)
            return
        end
    end
end

-- ==================== AUTO CLICK ====================
Main:Section({Title = "Auto Click (Attacking)"})
Main:Toggle({
    Title = "Auto Click",
    Callback = function(v)
        autoClicking = v
        if v then
            task.spawn(function()
                while autoClicking do
                    pcall(function() ClickRemote:InvokeServer() end)
                    task.wait(0.08)
                end
            end)
        end
    end,
})

-- ==================== STAR HATCHING ====================
Main:Section({Title = "Star Hatching"})
local starDropdown = Main:Dropdown({
    Title = "Select Star",
    Values = GetStars(),
    SearchBarEnabled = true,
    Callback = function(v) selectedStar = v end,
})

Main:Button({Title = "Refresh Stars", Callback = function() starDropdown:Refresh(GetStars()) end})

Main:Slider({
    Title = "Hatch Amount",
    Value = {Min = 1, Max = 50, Default = 1},
    Callback = function(v) hatchAmount = v end,
})

Main:Toggle({
    Title = "Auto Hatch Selected Star",
    Callback = function(v)
        autoHatching = v
        if v and selectedStar then
            task.spawn(function()
                while autoHatching do
                    pcall(function() OpenStarRemote:InvokeServer(selectedStar, hatchAmount) end)
                    task.wait(0.1)
                end
            end)
        end
    end,
})

-- ==================== ENEMY TARGETING ====================
Main:Section({Title = "Enemy Targeting"})

local enemyDropdown = Main:Dropdown({
    Title = "Select Enemy",
    Values = GetEnemies(),
    SearchBarEnabled = true,
    Callback = function(v) selectedEnemy = v end,
})

Main:Button({Title = "Refresh Enemies", Callback = function() enemyDropdown:Refresh(GetEnemies()) end})

Main:Button({
    Title = "Teleport to Selected Enemy",
    Callback = function()
        if selectedEnemy then
            TeleportToEnemy()
            WindUI:Notify({Title = "Teleported", Content = selectedEnemy})
        end
    end,
})

Main:Toggle({
    Title = "Auto Teleport to Selected Enemy",
    Callback = function(v)
        autoTeleporting = v
        if v and selectedEnemy then
            task.spawn(function()
                while autoTeleporting do
                    TeleportToEnemy()
                    task.wait(1.5)
                end
            end)
        end
    end,
})

WindUI:Notify({Title = "Loaded!", Content = "Select enemy â†’ Teleport + Auto Click = Farm", Duration = 9})
